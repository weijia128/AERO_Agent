<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>æœºåœºæ‹“æ‰‘å›¾ - 2025-10-21 11:00-12:00</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            border-bottom: 2px solid #4CAF50;
            padding-bottom: 10px;
        }
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }
        .stat-card h3 {
            margin: 0 0 10px 0;
            font-size: 14px;
            opacity: 0.9;
        }
        .stat-card .value {
            font-size: 32px;
            font-weight: bold;
        }
        .legend {
            margin: 20px 0;
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .legend-circle {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }
        #graph {
            width: 100%;
            height: 800px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ›« æœºåœºæ‹“æ‰‘å›¾å¯è§†åŒ–</h1>
        <p>æ—¶æ®µ: 2025-10-21 11:00:00 - 12:00:00</p>

        <div class="stats">
            <div class="stat-card">
                <h3>æ€»èŠ‚ç‚¹æ•°</h3>
                <div class="value">80</div>
            </div>
            <div class="stat-card">
                <h3>æœºä½</h3>
                <div class="value">31</div>
            </div>
            <div class="stat-card">
                <h3>è·‘é“</h3>
                <div class="value">2</div>
            </div>
            <div class="stat-card">
                <h3>äº¤å‰ç‚¹</h3>
                <div class="value">47</div>
            </div>
            <div class="stat-card">
                <h3>æ»‘è¡Œé“è¿æ¥</h3>
                <div class="value">32</div>
            </div>
        </div>

        <div class="legend">
            <div class="legend-item">
                <div class="legend-circle" style="background-color: #FF6B6B;"></div>
                <span>æœºä½</span>
            </div>
            <div class="legend-item">
                <div class="legend-circle" style="background-color: #4ECDC4;"></div>
                <span>è·‘é“</span>
            </div>
            <div class="legend-item">
                <div class="legend-circle" style="background-color: #95E1D3;"></div>
                <span>äº¤å‰ç‚¹</span>
            </div>
            <div class="legend-item">
                <div style="width: 30px; height: 2px; background-color: #888;"></div>
                <span>æ»‘è¡Œé“</span>
            </div>
        </div>

        <div id="graph"></div>
    </div>

    <script>
        // èŠ‚ç‚¹æ•°æ®
        const nodes = [{"id": "stand_113", "type": "stand", "lat": 34.441857039928436, "lon": 108.75363528728485, "stand_name": "113", "sample_count": 2}, {"id": "stand_521", "type": "stand", "lat": 34.45755869150162, "lon": 108.77030789852142, "stand_name": "521", "sample_count": 2}, {"id": "stand_311", "type": "stand", "lat": 34.4346284866333, "lon": 108.75986605882645, "stand_name": "311", "sample_count": 2}, {"id": "stand_507", "type": "stand", "lat": 34.4550347328186, "lon": 108.76288622617722, "stand_name": "507", "sample_count": 2}, {"id": "stand_504", "type": "stand", "lat": 34.45876568555832, "lon": 108.77665936946869, "stand_name": "504", "sample_count": 2}, {"id": "stand_316", "type": "stand", "lat": 34.4363397359848, "lon": 108.76553624868393, "stand_name": "316", "sample_count": 2}, {"id": "stand_110", "type": "stand", "lat": 34.44505423307419, "lon": 108.75653743743896, "stand_name": "110", "sample_count": 2}, {"id": "stand_342R", "type": "stand", "lat": 34.44154053926468, "lon": 108.75221639871597, "stand_name": "342R", "sample_count": 2}, {"id": "stand_344L", "type": "stand", "lat": 34.442015290260315, "lon": 108.75100404024124, "stand_name": "344L", "sample_count": 2}, {"id": "stand_522", "type": "stand", "lat": 34.45357024669647, "lon": 108.75919282436371, "stand_name": "522", "sample_count": 2}, {"id": "stand_320", "type": "stand", "lat": 34.44205015897751, "lon": 108.75283062458038, "stand_name": "320", "sample_count": 2}, {"id": "stand_402", "type": "stand", "lat": 34.444756507873535, "lon": 108.75577569007874, "stand_name": "402", "sample_count": 2}, {"id": "stand_305", "type": "stand", "lat": 34.43295478820801, "lon": 108.76314908266068, "stand_name": "305", "sample_count": 2}, {"id": "stand_107", "type": "stand", "lat": 34.44713294506073, "lon": 108.75217616558075, "stand_name": "107", "sample_count": 2}, {"id": "stand_108", "type": "stand", "lat": 34.44721609354019, "lon": 108.75206083059311, "stand_name": "108", "sample_count": 2}, {"id": "stand_543R", "type": "stand", "lat": 34.45184826850891, "lon": 108.76105159521103, "stand_name": "543R", "sample_count": 2}, {"id": "stand_322", "type": "stand", "lat": 34.442168176174164, "lon": 108.75233978033066, "stand_name": "322", "sample_count": 2}, {"id": "stand_303", "type": "stand", "lat": 34.442634880542755, "lon": 108.7533187866211, "stand_name": "303", "sample_count": 2}, {"id": "stand_428", "type": "stand", "lat": 34.44456070661545, "lon": 108.75647306442261, "stand_name": "428", "sample_count": 2}, {"id": "stand_308", "type": "stand", "lat": 34.44220036268234, "lon": 108.75340193510056, "stand_name": "308", "sample_count": 2}, {"id": "stand_502", "type": "stand", "lat": 34.45502668619156, "lon": 108.76296937465668, "stand_name": "502", "sample_count": 2}, {"id": "stand_310", "type": "stand", "lat": 34.44235324859619, "lon": 108.75310957431793, "stand_name": "310", "sample_count": 2}, {"id": "stand_545", "type": "stand", "lat": 34.452145993709564, "lon": 108.76103281974792, "stand_name": "545", "sample_count": 2}, {"id": "stand_514", "type": "stand", "lat": 34.444005489349365, "lon": 108.76923769712448, "stand_name": "514", "sample_count": 2}, {"id": "stand_111", "type": "stand", "lat": 34.4455960392952, "lon": 108.7497729063034, "stand_name": "111", "sample_count": 2}, {"id": "stand_508", "type": "stand", "lat": 34.452661871910095, "lon": 108.75614404678345, "stand_name": "508", "sample_count": 3}, {"id": "stand_515", "type": "stand", "lat": 34.43765938282013, "lon": 108.76182675361633, "stand_name": "515", "sample_count": 1}, {"id": "stand_109", "type": "stand", "lat": 34.447382390499115, "lon": 108.75222980976105, "stand_name": "109", "sample_count": 2}, {"id": "stand_534", "type": "stand", "lat": 34.4521701335907, "lon": 108.75764787197113, "stand_name": "534", "sample_count": 2}, {"id": "stand_519", "type": "stand", "lat": 34.449729323387146, "lon": 108.75288963317871, "stand_name": "519", "sample_count": 2}, {"id": "stand_540", "type": "stand", "lat": 34.45202797651291, "lon": 108.75036835670471, "stand_name": "540", "sample_count": 2}, {"id": "runway_05R", "type": "runway", "lat": 34.434062987565994, "lon": 108.76070201396942, "runway_name": "05R", "sample_count": 84}, {"id": "runway_05L", "type": "runway", "lat": 34.44707541630186, "lon": 108.75698000192642, "runway_name": "05L", "sample_count": 58}, {"id": "intersection_0", "type": "intersection", "lat": 34.45172131061554, "lon": 108.7738162279129, "point_count": 6}, {"id": "intersection_1", "type": "intersection", "lat": 34.428097690854756, "lon": 108.75597723892757, "point_count": 7}, {"id": "intersection_2", "type": "intersection", "lat": 34.423490863735395, "lon": 108.75131967714277, "point_count": 59}, {"id": "intersection_3", "type": "intersection", "lat": 34.422104199017795, "lon": 108.75015722853797, "point_count": 56}, {"id": "intersection_4", "type": "intersection", "lat": 34.42140380884039, "lon": 108.75147028216, "point_count": 58}, {"id": "intersection_5", "type": "intersection", "lat": 34.42728102207184, "lon": 108.75490307807922, "point_count": 6}, {"id": "intersection_6", "type": "intersection", "lat": 34.425620287656784, "lon": 108.75422738492489, "point_count": 16}, {"id": "intersection_7", "type": "intersection", "lat": 34.43392000028065, "lon": 108.76020325081689, "point_count": 28}, {"id": "intersection_8", "type": "intersection", "lat": 34.443086832761765, "lon": 108.75442117452621, "point_count": 4}, {"id": "intersection_9", "type": "intersection", "lat": 34.442519545555115, "lon": 108.75529110431671, "point_count": 3}, {"id": "intersection_10", "type": "intersection", "lat": 34.44367378950119, "lon": 108.77754092216492, "point_count": 6}, {"id": "intersection_11", "type": "intersection", "lat": 34.43364679813385, "lon": 108.76535654067993, "point_count": 4}, {"id": "intersection_12", "type": "intersection", "lat": 34.42480742931366, "lon": 108.75310897827148, "point_count": 9}, {"id": "intersection_13", "type": "intersection", "lat": 34.45983529090881, "lon": 108.77262234687805, "point_count": 9}, {"id": "intersection_14", "type": "intersection", "lat": 34.43861871957779, "lon": 108.77047955989838, "point_count": 6}, {"id": "intersection_15", "type": "intersection", "lat": 34.43683433532715, "lon": 108.76228702068329, "point_count": 10}, {"id": "intersection_16", "type": "intersection", "lat": 34.44014489650726, "lon": 108.77270221710205, "point_count": 3}, {"id": "intersection_17", "type": "intersection", "lat": 34.43276762962341, "lon": 108.7572392821312, "point_count": 18}, {"id": "intersection_18", "type": "intersection", "lat": 34.4529265165329, "lon": 108.75393502414227, "point_count": 8}, {"id": "intersection_19", "type": "intersection", "lat": 34.432740211486816, "lon": 108.75357270240784, "point_count": 3}, {"id": "intersection_20", "type": "intersection", "lat": 34.45576639279075, "lon": 108.77262649328813, "point_count": 23}, {"id": "intersection_21", "type": "intersection", "lat": 34.4319623708725, "lon": 108.75515162944794, "point_count": 3}, {"id": "intersection_22", "type": "intersection", "lat": 34.431166648864746, "lon": 108.76027464866638, "point_count": 3}, {"id": "intersection_23", "type": "intersection", "lat": 34.44233822822571, "lon": 108.75458264350891, "point_count": 5}, {"id": "intersection_24", "type": "intersection", "lat": 34.429060220718384, "lon": 108.75106036663055, "point_count": 4}, {"id": "intersection_25", "type": "intersection", "lat": 34.431779980659485, "lon": 108.76262819766998, "point_count": 5}, {"id": "intersection_26", "type": "intersection", "lat": 34.43518906831741, "lon": 108.76222640275955, "point_count": 10}, {"id": "intersection_27", "type": "intersection", "lat": 34.43584442138672, "lon": 108.76324653625488, "point_count": 3}, {"id": "intersection_28", "type": "intersection", "lat": 34.42607581615448, "lon": 108.74961644411087, "point_count": 6}, {"id": "intersection_29", "type": "intersection", "lat": 34.43285286426544, "lon": 108.76424431800842, "point_count": 3}, {"id": "intersection_30", "type": "intersection", "lat": 34.44576233625412, "lon": 108.77624899148941, "point_count": 4}, {"id": "intersection_31", "type": "intersection", "lat": 34.428930499336936, "lon": 108.75320808453993, "point_count": 11}, {"id": "intersection_32", "type": "intersection", "lat": 34.44888353347778, "lon": 108.77285242080688, "point_count": 3}, {"id": "intersection_33", "type": "intersection", "lat": 34.43267476558685, "lon": 108.75868213176727, "point_count": 5}, {"id": "intersection_34", "type": "intersection", "lat": 34.43190121650696, "lon": 108.75824332237244, "point_count": 5}, {"id": "intersection_35", "type": "intersection", "lat": 34.431685720171245, "lon": 108.75935988766807, "point_count": 7}, {"id": "intersection_36", "type": "intersection", "lat": 34.441521763801575, "lon": 108.75223517417908, "point_count": 4}, {"id": "intersection_37", "type": "intersection", "lat": 34.45798301696777, "lon": 108.77016466856003, "point_count": 10}, {"id": "intersection_38", "type": "intersection", "lat": 34.45875093340874, "lon": 108.77748414874077, "point_count": 4}, {"id": "intersection_39", "type": "intersection", "lat": 34.45801627635956, "lon": 108.77524101734161, "point_count": 5}, {"id": "intersection_40", "type": "intersection", "lat": 34.42634582519531, "lon": 108.7552535533905, "point_count": 3}, {"id": "intersection_41", "type": "intersection", "lat": 34.43101018667221, "lon": 108.7565141916275, "point_count": 6}, {"id": "intersection_42", "type": "intersection", "lat": 34.42638158798218, "lon": 108.75395894050598, "point_count": 3}, {"id": "intersection_43", "type": "intersection", "lat": 34.44982945919037, "lon": 108.76965701580048, "point_count": 3}, {"id": "intersection_44", "type": "intersection", "lat": 34.452907741069794, "lon": 108.77404287457466, "point_count": 4}, {"id": "intersection_45", "type": "intersection", "lat": 34.46017384529114, "lon": 108.77332672476768, "point_count": 4}, {"id": "intersection_46", "type": "intersection", "lat": 34.443149864673615, "lon": 108.75563219189644, "point_count": 4}];

        // è¾¹æ•°æ®
        const edges = [{"from": "runway_05R", "to": "runway_05R", "distance": 0.0, "usage_count": 40}, {"from": "stand_113", "to": "stand_113", "distance": 0.0, "usage_count": 1}, {"from": "stand_521", "to": "stand_521", "distance": 0.0, "usage_count": 1}, {"from": "stand_311", "to": "stand_311", "distance": 0.0, "usage_count": 1}, {"from": "stand_507", "to": "stand_507", "distance": 0.0, "usage_count": 1}, {"from": "stand_504", "to": "stand_504", "distance": 0.0, "usage_count": 1}, {"from": "stand_316", "to": "stand_316", "distance": 0.0, "usage_count": 1}, {"from": "stand_110", "to": "stand_110", "distance": 0.0, "usage_count": 1}, {"from": "stand_342R", "to": "stand_342R", "distance": 0.0, "usage_count": 1}, {"from": "stand_344L", "to": "stand_344L", "distance": 0.0, "usage_count": 1}, {"from": "stand_522", "to": "stand_522", "distance": 0.0, "usage_count": 1}, {"from": "stand_320", "to": "stand_320", "distance": 0.0, "usage_count": 1}, {"from": "stand_402", "to": "stand_402", "distance": 0.0, "usage_count": 1}, {"from": "stand_305", "to": "stand_305", "distance": 0.0, "usage_count": 1}, {"from": "stand_107", "to": "stand_107", "distance": 0.0, "usage_count": 1}, {"from": "stand_108", "to": "stand_108", "distance": 0.0, "usage_count": 1}, {"from": "stand_543R", "to": "stand_543R", "distance": 0.0, "usage_count": 1}, {"from": "stand_322", "to": "stand_322", "distance": 0.0, "usage_count": 1}, {"from": "stand_303", "to": "stand_303", "distance": 0.0, "usage_count": 1}, {"from": "stand_428", "to": "stand_428", "distance": 0.0, "usage_count": 1}, {"from": "stand_308", "to": "stand_308", "distance": 0.0, "usage_count": 1}, {"from": "stand_502", "to": "stand_502", "distance": 0.0, "usage_count": 1}, {"from": "stand_310", "to": "stand_310", "distance": 0.0, "usage_count": 1}, {"from": "stand_545", "to": "stand_545", "distance": 0.0, "usage_count": 1}, {"from": "stand_514", "to": "stand_514", "distance": 0.0, "usage_count": 1}, {"from": "stand_111", "to": "stand_111", "distance": 0.0, "usage_count": 1}, {"from": "stand_508", "to": "stand_515", "distance": 1747.6946293689525, "usage_count": 1}, {"from": "stand_508", "to": "stand_508", "distance": 0.0, "usage_count": 1}, {"from": "stand_109", "to": "stand_109", "distance": 0.0, "usage_count": 1}, {"from": "stand_534", "to": "stand_534", "distance": 0.0, "usage_count": 1}, {"from": "stand_519", "to": "stand_519", "distance": 0.0, "usage_count": 1}, {"from": "stand_540", "to": "stand_540", "distance": 0.0, "usage_count": 1}];

        // æŒ‰ç±»å‹åˆ†ç»„èŠ‚ç‚¹
        const standNodes = nodes.filter(n => n.type === 'stand');
        const runwayNodes = nodes.filter(n => n.type === 'runway');
        const intersectionNodes = nodes.filter(n => n.type === 'intersection');

        // åˆ›å»ºè¾¹çš„çº¿æ®µ
        const edgeLines = [];
        edges.forEach(edge => {
            const fromNode = nodes.find(n => n.id === edge.from);
            const toNode = nodes.find(n => n.id === edge.to);
            if (fromNode && toNode) {
                edgeLines.push({
                    type: 'scatter',
                    mode: 'lines',
                    x: [fromNode.lon, toNode.lon],
                    y: [fromNode.lat, toNode.lat],
                    line: {
                        color: '#888',
                        width: Math.min(edge.usage_count / 2, 5)
                    },
                    hoverinfo: 'text',
                    hovertext: `${edge.from} â†” ${edge.to}<br>è·ç¦»: ${edge.distance.toFixed(0)}m<br>ä½¿ç”¨æ¬¡æ•°: ${edge.usage_count}`,
                    showlegend: false
                });
            }
        });

        // åˆ›å»ºå›¾å½¢æ•°æ®
        const traces = [
            ...edgeLines,
            // æœºä½
            {
                type: 'scatter',
                mode: 'markers+text',
                x: standNodes.map(n => n.lon),
                y: standNodes.map(n => n.lat),
                text: standNodes.map(n => n.stand_name),
                textposition: 'top center',
                marker: {
                    size: 12,
                    color: '#FF6B6B',
                    line: { color: 'white', width: 2 }
                },
                hovertemplate: '<b>æœºä½: %{text}</b><br>åæ ‡: (%{y:.5f}, %{x:.5f})<extra></extra>',
                name: 'æœºä½'
            },
            // è·‘é“
            {
                type: 'scatter',
                mode: 'markers+text',
                x: runwayNodes.map(n => n.lon),
                y: runwayNodes.map(n => n.lat),
                text: runwayNodes.map(n => n.runway_name),
                textposition: 'bottom center',
                marker: {
                    size: 16,
                    symbol: 'square',
                    color: '#4ECDC4',
                    line: { color: 'white', width: 2 }
                },
                hovertemplate: '<b>è·‘é“: %{text}</b><br>åæ ‡: (%{y:.5f}, %{x:.5f})<extra></extra>',
                name: 'è·‘é“'
            },
            // äº¤å‰ç‚¹
            {
                type: 'scatter',
                mode: 'markers',
                x: intersectionNodes.map(n => n.lon),
                y: intersectionNodes.map(n => n.lat),
                marker: {
                    size: 6,
                    color: '#95E1D3',
                    opacity: 0.6
                },
                hovertemplate: '<b>äº¤å‰ç‚¹</b><br>åæ ‡: (%{y:.5f}, %{x:.5f})<extra></extra>',
                name: 'äº¤å‰ç‚¹'
            }
        ];

        // å¸ƒå±€é…ç½®
        const layout = {
            title: '',
            xaxis: {
                title: 'ç»åº¦',
                gridcolor: '#e0e0e0',
                zeroline: false
            },
            yaxis: {
                title: 'çº¬åº¦',
                gridcolor: '#e0e0e0',
                zeroline: false,
                scaleanchor: 'x',
                scaleratio: 1
            },
            hovermode: 'closest',
            showlegend: true,
            legend: {
                x: 1.02,
                y: 1,
                xanchor: 'left',
                yanchor: 'top'
            },
            plot_bgcolor: '#fafafa',
            paper_bgcolor: 'white',
            margin: { l: 60, r: 200, t: 40, b: 60 }
        };

        // é…ç½®é€‰é¡¹
        const config = {
            responsive: true,
            displayModeBar: true,
            displaylogo: false,
            modeBarButtonsToRemove: ['lasso2d', 'select2d']
        };

        // æ¸²æŸ“å›¾å½¢
        Plotly.newPlot('graph', traces, layout, config);
    </script>
</body>
</html>
